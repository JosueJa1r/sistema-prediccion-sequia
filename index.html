<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tierra que habla - Sistema de Sequ√≠a</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <!-- Selector de idioma -->
            <div class="language-selector">
                <label for="languageSelect">Idioma:</label>
                <select id="languageSelect">
                    <option value="es">Espa√±ol</option>
                    <option value="tara">Tarahumara</option>
                    <option value="rara">Rar√°muri</option>
                </select>
            </div>
            
            <h1 data-i18n="title">Tierra Que Habla</h1>
            <p data-i18n="subtitle">Sistema de an√°lisis meteorol√≥gico en Chihuahua</p>
        </div>

        <form id="analyzeForm">
            <div class="form-group">
                <label for="municipio" data-i18n="selectMunicipality">Selecciona un municipio:</label>
                <select id="municipio" required>
                    <option value="" data-i18n="chooseMunicipality">-- Elige un municipio --</option>
                    <option value="Ahumada">Ahumada</option>
                    <option value="Aldama">Aldama</option>
                    <option value="Allende">Allende</option>
                    <option value="Aquiles Serd√°n">Aquiles Serd√°n</option>
                    <option value="Ascensi√≥n">Ascensi√≥n</option>
                    <option value="Bach√≠niva">Bach√≠niva</option>
                    <option value="Balleza">Balleza</option>
                    <option value="Batopilas de Manuel G√≥mez Mor√≠n">Batopilas de Manuel G√≥mez Mor√≠n</option>
                    <option value="Bocoyna">Bocoyna</option>
                    <option value="Buenaventura">Buenaventura</option>
                    <option value="Camargo">Camargo</option>
                    <option value="Carich√≠">Carich√≠</option>
                    <option value="Casas Grandes">Casas Grandes</option>
                    <option value="Chihuahua">Chihuahua</option>
                    <option value="Ch√≠nipas">Ch√≠nipas</option>
                    <option value="Coronado">Coronado</option>
                    <option value="Coyame del Sotol">Coyame del Sotol</option>
                    <option value="Cuauht√©moc">Cuauht√©moc</option>
                    <option value="Cusihuiriachi">Cusihuiriachi</option>
                    <option value="Delicias">Delicias</option>
                    <option value="Dr. Belisario Dom√≠nguez">Dr. Belisario Dom√≠nguez</option>
                    <option value="El Tule">El Tule</option>
                    <option value="Galeana">Galeana</option>
                    <option value="G√≥mez Far√≠as">G√≥mez Far√≠as</option>
                    <option value="Gran Morelos">Gran Morelos</option>
                    <option value="Guachochi">Guachochi</option>
                    <option value="Guadalupe D.B.">Guadalupe D.B.</option>
                    <option value="Guadalupe y Calvo">Guadalupe y Calvo</option>
                    <option value="Guazapares">Guazapares</option>
                    <option value="Guerrero">Guerrero</option>
                    <option value="Hidalgo del Parral">Hidalgo del Parral</option>
                    <option value="Huejotit√°n">Huejotit√°n</option>
                    <option value="Ignacio Zaragoza">Ignacio Zaragoza</option>
                    <option value="Janos">Janos</option>
                    <option value="Jim√©nez">Jim√©nez</option>
                    <option value="Ju√°rez">Ju√°rez</option>
                    <option value="Julimes">Julimes</option>
                    <option value="La Cruz">La Cruz</option>
                    <option value="L√≥pez">L√≥pez</option>
                    <option value="Madera">Madera</option>
                    <option value="Maguarichi">Maguarichi</option>
                    <option value="Manuel Benavides">Manuel Benavides</option>
                    <option value="Matach√≠">Matach√≠</option>
                    <option value="Matamoros">Matamoros</option>
                    <option value="Meoqui">Meoqui</option>
                    <option value="Morelos">Morelos</option>
                    <option value="Moris">Moris</option>
                    <option value="Namiquipa">Namiquipa</option>
                    <option value="Nonoava">Nonoava</option>
                    <option value="Nuevo Casas Grandes">Nuevo Casas Grandes</option>
                    <option value="Ocampo">Ocampo</option>
                    <option value="Ojinaga">Ojinaga</option>
                    <option value="Prax√©dis G. Guerrero">Prax√©dis G. Guerrero</option>
                    <option value="Riva Palacio">Riva Palacio</option>
                    <option value="Rosales">Rosales</option>
                    <option value="Rosario">Rosario</option>
                    <option value="San Francisco de Borja">San Francisco de Borja</option>
                    <option value="San Francisco de Conchos">San Francisco de Conchos</option>
                    <option value="San Francisco del Oro">San Francisco del Oro</option>
                    <option value="Santa B√°rbara">Santa B√°rbara</option>
                    <option value="Satev√≥">Satev√≥</option>
                    <option value="Saucillo">Saucillo</option>
                    <option value="Santa Isabel">Santa Isabel</option>
                    <option value="Temosachic">Temosachic</option>
                    <option value="Urique">Urique</option>
                    <option value="Uruachi">Uruachi</option>
                    <option value="Valle de Zaragoza">Valle de Zaragoza</option>
                </select>
            </div>

            <button type="submit" data-i18n="analyzeButton">Analizar Sequ√≠a</button>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p data-i18n="loadingMessage">Consultando datos meteorol√≥gicos...</p>
            </div>
        </form>

        <!-- Bot√≥n para ver datos diarios -->
        <a href="#" id="linkDatosDiarios" target="_blank" class="button-link" style="display: none;">Ver Datos Diarios</a>

        <div class="error" id="error"></div>

        <div class="result" id="result">
            <h2 id="resultTitle"><span data-i18n="analysisFor">An√°lisis para</span> <span id="municipioName"></span></h2>

            <div class="result-item">
                <span class="result-label" data-i18n="droughtIndex">√çndice de Sequ√≠a:</span>
                <span class="result-value" id="indiceValue">--</span>
            </div>

            <div class="result-item">
                <span class="result-label" data-i18n="category">Categor√≠a:</span>
                <span class="result-value" id="nivelValue">--</span>
            </div>

            <div class="datos-clima">
                <h3 data-i18n="climateData">Datos Clim√°ticos (Promedio √∫ltimos 90 d√≠as)</h3>
                <div class="grid-datos">
                    <div class="dato-mini">
                        <div class="dato-mini-label" data-i18n="precipitation">Precipitaci√≥n</div>
                        <div class="dato-mini-value" id="precipValue">-- mm</div>
                    </div>
                    <div class="dato-mini">
                        <div class="dato-mini-label" data-i18n="temperature">Temperatura</div>
                        <div class="dato-mini-value" id="tempValue">-- ¬∞C</div>
                    </div>
                    <div class="dato-mini">
                        <div class="dato-mini-label" data-i18n="evapotranspiration">Evapotranspiraci√≥n</div>
                        <div class="dato-mini-value" id="evapValue">-- mm</div>
                    </div>
                </div>
            </div>

            <!-- Secci√≥n de Recomendaciones (movida aqu√≠) -->
            <div class="recomendaciones-container">
                <h3 data-i18n="recommendations">Recomendaciones</h3>
                <div class="recomendacion-card">
                    <h4 data-i18n="forFarmers">Para Agricultores</h4>
                    <p id="recAgricultores">--</p>
                </div>
                <div class="recomendacion-card">
                    <h4 data-i18n="forRanchers">Para Ganaderos</h4>
                    <p id="recGanaderos">--</p>
                </div>
            </div>

            <!-- Gr√°ficas -->
            <div class="charts">
                <h3 data-i18n="charts">Gr√°ficas</h3>
                <div class="charts-grid">
                    <div class="chart-card">
                        <canvas id="chartLine" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-card">
                        <canvas id="chartScatter" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-card">
                        <canvas id="chartBar" width="400" height="200"></canvas>
                    </div>
                    <div class="chart-card">
                        <canvas id="chartRegression" width="400" height="200"></canvas>
                    </div>
                </div>

                <!-- Modelo matem√°tico integrado -->
                <div class="modelo-container" style="margin-top: 25px; padding-top: 20px; border-top: 2px solid #ddd; text-align: center;">
                    <h3 style="color: rgb(139, 38, 50); margin-bottom: 15px;" data-i18n="riskEvolutionTitle">Evoluci√≥n del √çndice de Sequ√≠a</h3>
                    <canvas id="modeloGrafica" width="600" height="300" style="border: 1px solid #ccc; background: white; border-radius: 8px; max-width: 100%;"></canvas>
                    
                    <!-- Leyenda para la gr√°fica del modelo -->
                    <div style="display: flex; justify-content: center; gap: 20px; margin-top: 15px; font-family: Arial, sans-serif; font-size: 12px;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <span style="width: 25px; height: 14px; border-radius: 3px; background: linear-gradient(to right, rgba(220, 53, 69, 0.1), rgba(220, 53, 69, 0.8));"></span>
                            <span>Curva de Riesgo Real (90 d√≠as)</span>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="static/translations.js"></script>
    <script src="static/script.js"></script>

    <!-- Contenedor Flotante para Mapa y Mensaje -->
    <div class="floating-container">
        <div id="mapMessage" class="floating-message">Consulta los puntos de apoyo.</div>
        <a href="static/diferencial/mapa.html" id="mapButton" class="floating-button" title="Consultar puntos de apoyo">
            üó∫Ô∏è
        </a>
    </div>
</body>
</html>
